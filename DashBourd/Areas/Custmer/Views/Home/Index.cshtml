@model IEnumerable<Movie>
<div class="swiper mySwiper">
    <div class="swiper-wrapper">
        <div class="swiper-slide">

            <div class="image">

                <div class="black">

                    <h1>Death on the Nile</h1>
                    <div class="star">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star-half-stroke"></i>
                        <i class="fa-regular fa-star"></i>
                    </div>
                    <p>
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                        Consectetur distinctio quis, ea commodi repellendus
                        fugiat aspernatur perspiciatis optio pariatur quod est,
                        nihil enim nemo saepe possimus sequi consequuntur, neque
                        eius.
                    </p>
                    <div class="genre">

                        <a href="#" class="category">Action</a>
                        <a href="#" class="category">Drama</a>
                        <a href="#" class="category"><span>4K</span></a>

                    </div>
                    <div class="watch">
                        <i class="fa-solid fa-play"></i>
                        <p>watch the trailer</p>
                    </div>

                </div>

                <img src="~/images/0b070a5d-bcf6-4018-8dfb-d96b77ef833a.jpg">

            </div>

        </div>

        <div class="swiper-slide">

            <div class="image">

                <div class="black">

                    <h1>Avatar</h1>
                    <div class="star">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star-half-stroke"></i>
                        <i class="fa-regular fa-star"></i>
                    </div>
                    <p>
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                        Consectetur distinctio quis, ea commodi repellendus
                        fugiat aspernatur perspiciatis optio pariatur quod est,
                        nihil enim nemo saepe possimus sequi consequuntur, neque
                        eius.
                    </p>
                    <div class="genre">

                        <a href="#" class="category">Action</a>
                        <a href="#" class="category">Drama</a>
                        <a href="#" class="category"><span>4K</span></a>

                    </div>
                    <div class="watch">
                        <i class="fa-solid fa-play"></i>
                        <p>watch the trailer</p>
                    </div>

                </div>

                <img src="~/images/133800f3-47f8-4a69-8186-b6909e12814d.jpg">

            </div>

        </div>

        <div class="swiper-slide">

            <div class="image">

                <div class="black">

                    <h1>The Avengers</h1>
                    <div class="star">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star-half-stroke"></i>
                        <i class="fa-regular fa-star"></i>
                    </div>
                    <p>
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                        Consectetur distinctio quis, ea commodi repellendus
                        fugiat aspernatur perspiciatis optio pariatur quod est,
                        nihil enim nemo saepe possimus sequi consequuntur, neque
                        eius.
                    </p>
                    <div class="genre">

                        <a href="#" class="category">Action</a>
                        <a href="#" class="category">Drama</a>
                        <a href="#" class="category"><span>4K</span></a>

                    </div>
                    <div class="watch">
                        <i class="fa-solid fa-play"></i>
                        <p>watch the trailer</p>
                    </div>

                </div>

                <img src="~/images/MovieSubImg/505940ae-4b4d-4a7b-8bf3-8db1c9816907.jpg">

            </div>

        </div>

        <div class="swiper-slide">

            <div class="image">

                <div class="black">

                    <h1>Fullmetal Alchemist: Final Transmutation</h1>
                    <div class="star">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star-half-stroke"></i>
                        <i class="fa-regular fa-star"></i>
                    </div>
                    <p>
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                        Consectetur distinctio quis, ea commodi repellendus
                        fugiat aspernatur perspiciatis optio pariatur quod est,
                        nihil enim nemo saepe possimus sequi consequuntur, neque
                        eius.
                    </p>
                    <div class="genre">

                        <a href="#" class="category">Action</a>
                        <a href="#" class="category">Drama</a>
                        <a href="#" class="category"><span>4K</span></a>

                    </div>
                    <div class="watch">
                        <i class="fa-solid fa-play"></i>
                        <p>watch the trailer</p>
                    </div>

                </div>

                <img src="~/Images/79dba41c-f7ff-4f84-a628-44d2d6f4abec.jpg">

            </div>

        </div>

        <div class="swiper-slide">

            <div class="image">

                <div class="black">

                    <h1>Apocalypto</h1>
                    <div class="star">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star-half-stroke"></i>
                        <i class="fa-regular fa-star"></i>
                    </div>
                    <p>
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                        Consectetur distinctio quis, ea commodi repellendus
                        fugiat aspernatur perspiciatis optio pariatur quod est,
                        nihil enim nemo saepe possimus sequi consequuntur, neque
                        eius.
                    </p>
                    <div class="genre">

                        <a href="#" class="category">Action</a>
                        <a href="#" class="category">Drama</a>
                        <a href="#" class="category"><span>4K</span></a>

                    </div>
                    <div class="watch">
                        <i class="fa-solid fa-play"></i>
                        <p>watch the trailer</p>
                    </div>

                </div>

                <img src="~/Images/b417ca54-0415-4c4f-85d3-1ceb6f745443.jpg">

            </div>

        </div>


    </div>
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-pagination"></div>
</div>

<section class="movies-section">
    <h2 class="section-title">Categorys</h2>

    <!-- 🟢 أزرار الفلاتر -->
    <section class="filter-section">
        <button class="filter-btn active" data-category="all">All</button>

        @foreach (var category in ViewBag.Categories)
        {
            <button class="filter-btn" data-category="@category.Name.ToLower()">@category.Name</button>
        }
    </section>

    <!-- 🟢 الأفلام -->
    <div class="movies-grid">
        @foreach (var item in Model)
        {
            <div class="movie-card" data-category="@item.Category?.Name?.ToLower()">
                <img src="~/images/@item.MainImage" alt="Movie Poster">
                <div class="movie-info">
                    <h3>🎬 @item.Name</h3>
                    <p>📂 Category: <strong>@item.Category?.Name</strong></p>
                    <p>📅 Date: @item.DateTime.ToString("dd MMM yyyy")</p>
                    <div class="movie-actions">
                        <button class="book-btn">🎟️ Book Ticket</button>
                        <a class="info-btn"
                           asp-area="Custmer"
                           asp-controller="Home"
                           asp-action="Details"
                           asp-route-id="@item.Id">
                            ℹ️ See Info →
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
</section>
<script>

     document.addEventListener("DOMContentLoaded", function () {
        const filterButtons = document.querySelectorAll(".filter-btn");
        const movieCards = document.querySelectorAll(".movie-card");

        filterButtons.forEach(btn => {
            btn.addEventListener("click", () => {
                // إزالة الـ active من كل الأزرار
                filterButtons.forEach(b => b.classList.remove("active"));
                btn.classList.add("active");

                const category = btn.dataset.category;

                movieCards.forEach(card => {
                    const movieCategory = card.dataset.category;

                    // لو "All" أو نفس الكاتيجوري، نعرض الكارد
                    if (category === "all" || movieCategory === category) {
                        card.style.display = "block";
                        card.classList.add("fade-in");
                    } else {
                        card.style.display = "none";
                        card.classList.remove("fade-in");
                    }
                });
            });
        });
    });







    document.addEventListener("DOMContentLoaded", () => {
      const pageNumbers = document.querySelectorAll(".page-number");
      const prevBtn = document.querySelector(".prev");
      const nextBtn = document.querySelector(".next");
      let activePage = 1;
      const totalPages = pageNumbers.length;

      function updatePagination() {
        pageNumbers.forEach((btn) => {
          btn.classList.remove("active");
          if (parseInt(btn.dataset.page) === activePage) {
            btn.classList.add("active");
          }
        });

        prevBtn.disabled = activePage === 1;
        nextBtn.disabled = activePage === totalPages;
      }

      pageNumbers.forEach((btn) => {
        btn.addEventListener("click", () => {
          activePage = parseInt(btn.dataset.page);
          updatePagination();
          console.log("Page:", activePage);
        });
      });

      prevBtn.addEventListener("click", () => {
        if (activePage > 1) {
          activePage--;
          updatePagination();
          console.log("Page:", activePage);
        }
      });

      nextBtn.addEventListener("click", () => {
        if (activePage < totalPages) {
          activePage++;
          updatePagination();
          console.log("Page:", activePage);
        }
      });

      updatePagination();
    });
</script>
